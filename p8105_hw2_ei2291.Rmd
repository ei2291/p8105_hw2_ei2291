---
title: "p8105_hw2_ei2291"
author: "Eman Ibrahim"
output: github_document
date: "2025-09-28"
---

```{r}
library(tidyverse)
```

##Problem 1

Import and cleaning the datasets

```{r}
pols_month_df=
  read_csv("fivethirtyeight_datasets/pols-month.csv") |> 
  janitor::clean_names()

unemployment_df=
  read_csv("fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names()

snp_df=
  read_csv("fivethirtyeight_datasets/snp.csv") |> 
  janitor::clean_names()
```

Clean pols-month.csv

```{r}
pols_month_df=
  separate(pols_month_df, mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    month=month.name[as.numeric(month)],
    prezident=ifelse(prez_gop ==1, "gop", "dem"),
    year=as.integer(year)
    ) |> 
    select(-prez_gop, -prez_dem, -day)
  
```

Clean snp.csv

```{r}
snp_df=
  separate(snp_df,date, into=c("month", "day", "year"), sep = "/") |> 
  mutate(
    year=ifelse(
      as.integer(year)>=50, 
      as.integer(year)+1900, 
      as.integer(year)+2000),
    month=month.name[as.numeric(month)]
  ) |> 
  arrange(year, month) |> 
  select(year, month, everything(),-day) 
  
```

Clean unemployment.csv

```{r}
unemployment_df=
  pivot_longer(unemployment_df,
    cols= jan:dec,
    names_to= "month",
    values_to="unemployment"
  ) |> 
  mutate(
    month=str_to_title(month),
    month=match(month, month.abb),
    month=month.name[month]
  ) |> 
  arrange(year, month) 
  
```

Merging snp into pols

```{r}
merge_df=
  left_join(pols_month_df, snp_df, by= c("year", "month")) |> 
  left_join(unemployment_df, by = c("year","month")) |> 
  arrange(year, month)
```


About the datasets

From my understanding the `pols-momths.csv` contains data on pols for each U.S. party, the `snp.csv` contains data on stock market I think, and the `unemployment.csv` is on unemployment rates in the U.S. All datasets show what happened each month throughout those years. We then cleaned and merged all by year and month. The key variables are: `year`, `month`, `prezident`,`close`, and `unemployment`.


##Problem 2
```{r}
library(tidyverse)
library(readxl)
```

Clean Mr. Trash Wheel dataset

```{r}
Mr_trash_df=
  read_excel("trash_wheel_collection_data.xlsx",
             sheet="Mr. Trash Wheel",
             skip=1) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(sports_balls=as.integer(round(sports_balls)),
         year=as.integer(year)
         ) |> 
  select(-x15,-x16)
  
```

Clean Professor Trash Wheel dataset

```{r}
Professor_trash_df=
  read_excel("trash_wheel_collection_data.xlsx", sheet= "Professor Trash Wheel", skip=1) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(wheel="Professor Trash Wheel",
         year=as.integer(year))
```

Clean Gwynnda Trash Wheel dataset

```{r}
Gwynnda_trash_df=
  read_excel("trash_wheel_collection_data.xlsx", sheet= "Gwynnda Trash Wheel", skip=1) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(wheel="Gwynnda",
         year=as.integer(year))
```

Combining all datasets

```{r}
trash_df=
  bind_rows(Mr_trash_df, 
            Professor_trash_df, 
            Gwynnda_trash_df) |> 
  relocate(wheel) |> 
  arrange(wheel, year, month)
```

Check for observation in `trash_df` and key variables

```{r}
dim(trash_df)
names(trash_df)
```
There are 1033 observations and 15 variables. Key variables are `wheel`, `dumpster`, `month`, `year`, `weight_tons`, `cigarette_butts`, and `sports_balls`. There are other variables that I didn't mention that can be helpful for the analyses. 

Total weight of trash collected by Prof. Trash

```{r}
total_weight_Professor_trash_df=
  filter(trash_df, wheel=="Professor Trash Wheel") |> 
  summarize(total_weight= sum(weight_tons, na.rm=TRUE))
   
```

The total weight of trash collected by Professor Trash Wheel is 246.74 tons.

Total no. of cigarette butts collected by Gwynnda (June 2022)

```{r}
total_cigarette_butts_Gwynnda_trash_df=
  filter(trash_df, 
         wheel=="Gwynnda",    month=="June", year==2022) |>
  summarize(total_cigarette_butts = sum (cigarette_butts, na.rm=TRUE))
```

The total number of cigarette butts collected by Gwynnda in June 2022 was 18120 butts.




